{"name":"Random Treasure (Jewelry)","type":"script","author":"QUmQIf6DqYHqlZbK","img":"icons/svg/chest.svg","scope":"global","command":"var Availability = [\n\"common\",\n\"scarce\",\n\"rare\",\n\"exotic\"\n];\n\nvar FUR = [\n[\"white wolf fur\", 300],\n[\"ermine\", 250],\n[\"wolf fur\", 100],\n[\"fox fur\", 25],\n[\"$COLOUR fur\", 10],\n[\"squirel fur\", 0],\n[\"fur\", 0],\n[\"fur\", 0],\n[\"mangy fur\",-25]\n];\n\nvar TRIMMING = [\n[\"ermine\", 50],\n[\"fox fur\", 25],\n[\"squirel fur\", 0],\n[\"$COLOUR fur\", 10],\n[\"fur\", 0],\n[\"mangy fur\",-25]\n];\n\nvar FIERCEANIMAL = [\n[\"gryphon\", 50],\n[\"dragon\", 25],\n[\"lion\", 25],\n[\"eagle\", 0],\n[\"panther\", 0],\n[\"bear\", 0],\n[\"wolf\", 0],\n[\"boar\", -10]\n];\n\nvar ANIMAL = [\n[\"snake\",0],\n[\"fish\",0],\n[\"horse\",0],\n[\"dog\",0],\n[\"seagull\",0],\n[\"frog\",-10],\n[\"pig\", -25],\n[\"$FIERCEANIMAL\",0],\n[\"$FIERCEANIMAL\",0],\n[\"$FIERCEANIMAL\",0]\n];\n\n//Based on silver\nvar CHAINMETAL = [\n[\"gold\", 1900],\n[\"silver\", 0],\n[\"brass\", -90]\n];\n\nvar RAREMETAL = [\n[\"meteoric iron\", 200],\n[\"Nuln's steel\", 200],\n[\"ithilmar\", 2500],\n[\"Gromril\", 2500]\n];\n\nvar METALTRIMS = [\n[\"gold\", 600],\n[\"gold\", 600],\n[\"silver\", 100],\n[\"silver\", 100],\n[\"tarnished silver\", 50],\n[\"brass\", 0],\n[\"pitted metal\", -25],\n[\"$RAREMETAL\", 0]\n];\n\nvar METALFITTING = [\n[\"gilded\", 10],\n[\"gilded\", 10],\n[\"brass\", 0],\n[\"brass\", 0],\n[\"steel\", 0],\n[\"steel\", 0],\n[\"$METALTRIMS\", 0]\n];\n\nvar METALMATERIAL = [\n[\"$METALTRIMS\", 25],\n[\"$METALTRIMS\", 25],\n[\"$METALTRIMS\", 25],\n[\"Nuln steel\",200],\n[\"steel\", 50],\n[\"iron\", 0],\n[\"iron\", 0],\n[\"pewter\", 0],\n[\"rusted iron\", -25]\n];\n\nvar WOODMATERIAL = [\n[\"oak wood\",25],\n[\"ashwood\",25],\n[\"wood\",0],\n[\"wood\",0]\n];\n\nvar STONEMATERIAL = [\n[\"obsidian\", 200],\n[\"marble\", 100],\n[\"$COLOUR stone\", 0],\n[\"stone\", 0],\n[\"clay\", -25]\n];\n\nANYMATERIAL = [\n[\"$METALMATERIAL\", 0],\n[\"$STONEMATERIAL\", -50],\n[\"$WOODMATERIAL\", -75]\n];\n\n\nvar SCABBARDMAT = [\n[\"$WOODMATERIAL\", 0],\n[\"leather\", 0],\n[\"laced\", 0],\n[\"polished leather\", 0],\n[\"oiled leather\", 0],\n[\"$COLOUR painted wood\",0]\n];\n\nvar CRAFTFINE = [\n[\"<i>fine</i>\", 100],\n[\"\", 0],\n[\"\", 0]\n];\n\nvar INLAYGEMS = [\n[\"pearl\", 200],\n[\"sapphire\", 200],\n[\"garnet\", 300],\n[\"emeral\", 300],\n[\"diamond\", 500],\n[\"$MAYBECOLOUR coloured glass\", -25]\n];\n\nvar DEITY = [\n[\"Sigmar\",50],\n[\"Ulric\",25],\n[\"Shaylla\",0],\n[\"Morr\",0],\n[\"Manaan\",0],\n[\"Taal\",0],\n[\"Rhya\",0],\n[\"Ranald\",0]\n];\n\nvar MAYBECOLOUR = [\n[\"$COLOUR\", 0],\n[\"\",0]\n];\n\n\nvar MAYBESIZE = [\n[\"big\", 5],\n[\"large\",5],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"small\", -5],\n[\"thin\", -5]\n];\n\n\nvar COLOUR = [\n[\"purple\", 50],\n[\"red\",25],\n[\"blue\",25],\n[\"white\",25],\n[\"dark gray\", 0],\n[\"yellow\",0],\n[\"tan\", 0],\n[\"green\", 0],\n[\"brown\", 0],\n[\"brownish\", -25],\n[\"greenish\", -25]\n];\n\nvar SAINTTITLE = [\n[\"the Bishop\",0],\n[\"of $CITY\",0],\n[\"of $CITY\",0],\n[\"of $PROVINCE\",0],\n[\"of $PLACE\",0],\n[\" II\",0],\n[\" III\",0],\n[\" IV\",0],\n[\" IX\",0],\n[\" the Martyr\",0],\n[\" the Elder\",0],\n[\" the Young\",0],\n[\" the Good\",0]\n];\n\nvar SAINT = [\n[\"Saint Arnold $SAINTTITLE\",0],\n[\"Saint Angus $SAINTTITLE\",0],\n[\"Saint Bertrand $SAINTTITLE\",0],\n[\"Saint Cyril $SAINTTITLE\",0],\n[\"Saint Fridolin $SAINTTITLE\",0],\n[\"Saint Gertrude $SAINTTITLE\",0],\n[\"Saint Heribert $SAINTTITLE\",0],\n[\"Saint Hildegard $SAINTTITLE\",0],\n[\"Saint Odile $SAINTTITLE\",0],\n[\"Saint Willehad $SAINTTITLE\",0]\n];\n\nvar RELIC = [\n[\"the ashes of $SAINT\",0],\n[\"the ashes of $SAINT\",0],\n[\"a bone of $SAINT\",0],\n[\"a bone of $SAINT\",0],\n[\"the $BODYPART of $SAINT\",0],\n[\"a mummified finger of $SAINT\",10],\n[\"a mummified hand of $SAINT\",10],\n[\"the skull of $SAINT\",25],\n[\"the skull of $SAINT inscribed with '$SHIELDSENTENCE'\",25]\n];\n\nvar SHIELDCOLOURS = [\n[\"gules (red)\",0],\n[\"gules (red)\",0],\n[\"azure (blue)\",0],\n[\"azure (blue)\",0],\n[\"vert (green)\",0],\n[\"vert (green)\",0],\n[\"sable (black)\",0],\n[\"sable (black)\",0],\n[\"purpure (purple)\",0],\n[\"purpure (purple)\",0],\n[\"argent (white)\",0],\n[\"argent (white)\",0],\n[\"or (yellow)\",0],\n[\"or (yellow)\",0],\n[\"sanguine (crimsom)\",0],\n[\"tenny (orange)\",0],\n[\"braun (brown)\",0],\n[\"carnation (pink)\",0],\n[\"eisen-farbe (iron gray)\",0]\n];\n\nvar SHIELDDECORATIONS = [\n[\"$SHIELDCOLOURS\",0],\n[\"$SHIELDCOLOURS\",0],\n[\"per pale $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"per pale $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"per pale $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"quarterly $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"quarterly $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"per fess $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"per bend $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"per chevron inverted $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"per chevron $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"per saltire $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"two bend $SHIELDCOLOURS and $SHIELDCOLOURS\",0],\n[\"$SHIELDCOLOURS a cross $SHIELDCOLOURS\",0],\n[\"$SHIELDCOLOURS a base $SHIELDCOLOURS\",0],\n[\"$SHIELDCOLOURS a chief $SHIELDCOLOURS\",0],\n[\"$SHIELDCOLOURS and $SHIELDCOLOURS bordure\",0]\n];\n\nvar SHIELDCHARGES = [\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"with a $SHIELDCOLOURS $FIERCEANIMAL charge \",0],\n[\"with a $FIERCEANIMAL proper charge \",0],\n[\"with a $SHIELDCOLOURS hammer charge \",0],\n[\"with a $SHIELDCOLOURS twin-tailed comet charge \",0],\n[\"with a $SHIELDCOLOURS heart charge \",0],\n[\"with a $SHIELDCOLOURS $ANIMAL charge \",0],\n[\"with a $SHIELDCOLOURS $SHAPE charge \",0],\n[\"with a $SHIELDCOLOURS $SHAPE charge \",0],\n[\"with a proper $ANIMAL charge \",0],\n[\"with a $SHIELDCOLOURS hourglass charge \", 0],\n[\"with a $SHIELDCOLOURS gothic cross charge \", 0],\n[\"with a $SHIELDCOLOURS crowned skull charge \", 0],\n[\"with a proper crowned skull charge \", 0],\n[\"with a $SHIELDCOLOURS skull charge \", 0],\n[\"with a $SHIELDCOLOURS set of scales charge \", 0],\n[\"with a $SHIELDCOLOURS key charge \", 0],\n[\"with a $SHIELDCOLOURS fleur-de-lys charge \",0]\n];\n\nvar SHIELDEXTRAS = [\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\" and a scroll that says '$SAINT'\",0],\n[\" and a scroll that says '$SHIELDSENTENCE'\",0],\n[\" and a scroll that says '$SHIELDSENTENCE'\",0],\n[\" and a scroll that says '$SHIELDSENTENCE und $SHIELDSENTENCE'\",0],\n[\" and a $DANGLING tied to it\",0]\n];\n\nvar BODYPART = [\n[\"blood\",0],\n[\"blood\",0],\n[\"tears\",0],\n[\"heart\",0],\n[\"hand\",0]\n];\n\nvar SHIELDSENTENCE = [\n[\"$CITY\",0],\n[\"$CITY\",0],\n[\"$PROVINCE\",0],\n[\"$PROVINCE\",0],\n[\"$DEITY\",0],\n[\"$DEITY's $BODYPART\",0],\n[\"Ehre\",0],\n[\"Sieg\",0],\n[\"Ewig\",0],\n[\"Emperor\",0]\n];\n\nvar STAINS = [\n[\"badly stained\",-10],\n[\"mud-caked\", -10],\n[\"blood-speckled\",-25],\n[\"mouldering\",-25],\n[\"filthy, mud-caked, blood-drenched\",-50],\n[\"fire damaged\",-50]\n];\n\nvar PAPERDAMAGED = [\n[\"sun-bleached\",-10],\n[\"sun-faded\",-10],\n[\"weathered\",-10],\n[\"well read\",-10],\n[\"worm eaten\",-15],\n[\"water damaged\",-15],\n[\"water-warped\",-20],\n[\"$STAINS\", 0],\n[\"$STAINS\", 0],\n[\"$STAINS\", 0],\n[\"$STAINS\", 0],\n[\"$STAINS\", 0]\n];\nvar WRITING = [\n[\"etched\", 0],\n[\"inscribed\", 0],\n[\"engraved\", 0]\n];\n\n\nvar EMBROIDED = [\n[\"embroided\", 25],\n[\"embroided\", 25],\n[\"embroided\", 25],\n[\"painted\", 0]\n];\n\nvar PROVINCE = [\n[\"Altdorf\",0],\n[\"Averland\",0],\n[\"Hotchland\",0],\n[\"Middenheim\",0],\n[\"Middenland\",0],\n[\"Nordland\",0],\n[\"Nuln\",0],\n[\"Nuln\",0],\n[\"Ostermark\",0],\n[\"Ostland\",0],\n[\"Reikland\",0],\n[\"Sylvania\",0],\n[\"Stirland\",0],\n[\"Talabecland\",0],\n[\"Talabheim\",0],\n[\"Wissenland\",0]\n];\n\nvar CITY = [\n[\"Altdorf\",0],\n[\"Nuln\",0],\n[\"Talabheim\",0],\n[\"Middenheim\",0],\n[\"Carroburg\",0],\n[\"Ubersreik\",0]\n];\n\nvar PLACE = [\n[\"$PROVINCE\",0],\n[\"$PROVINCE\",0],\n[\"$PROVINCE\",0],\n[\"$CITY\",0],\n[\"$CITY\",0],\n[\"Kislev\",0],\n[\"Wasteland\",0],\n[\"Estalia\",0],\n[\"Tilea\",0],\n[\"Araby\",0]\n];\n\nvar GOODCLOTH = [ \n[\"fashionable\", 0],\n[\"embroidered\", 0],\n[\"richly decorated\", 0]\n];\n\n\nvar BADCLOTH = [ \n[\"badly stiched\", 0],\n[\"full of holes\", 0],\n[\"threadbare\", 0],\n[\"moth-eaten\", 0],\n[\"ragged\", 0]\n];\n\nvar GOODORBADCLOTH = [\n[\"$GOODCLOTH\", 20],\n[\"$BADCLOTH\", -20]\n];\n\nvar DECORATION = [\n[\"of presumably great value\",100],\n[\"$WRITING with $OATH the Emperor\",50],\n[\"$WRITING with $OATH $DEITY always\", 25],\n[\"$WRITING with $OATH $DEITY\", 25],\n[\"$WRITING with runes\", 25],\n[\"$WRITING with a vengenful prayer\", 10],\n[\"$WRITING with a prayer to protect the bearer who has faith in $DEITY\", 10],\n[\"$WRITING with the image of crossed swords\",5],\n[\"$WRITING with a hunting scene\",5],\n[\"$WRITING with the image of a nude dancer\",5],\n[\"$WRITING with $SHAPE\",0],\n[\"$WRITING with $SHAPE\",0],\n[\"$WRITING with $SHAPE\",0],\n[\"$WRITING with '$SHIELDSENTENCE'\",0],\n[\"$WRITING with '$SHIELDSENTENCE und $SHIELDSENTENCE'\",0],\n[\"withwith no extra decoration\",0],\n[\"with no additional decoration\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0]\n];\n\nvar DWARFDECORATION = [\n[\"of a distinctive geometric design\",25],\n[\"with geometric engravings\",25],\n[\"covered with decorative, scrolling engravings\",25],\n[\"$WRITING with runes\", 25],\n[\"$WRITING with the image of a stylised dwarf's head\",20]\n[\"$DECORATION\",0]\n[\"\",0]\n];\n\nvar ELFDECORATION = [\n[\"leaf-patterned\",25],\n[\"tree-patterned\",25],\n[\"decorated with $COLOUR silk ribbons\",25],\n[\"$WRITING with Eltharin runes\", 25],\n[\"with golden felegree all over it\", 25],\n[\"with a large $INLAYGEMS inset\", 25],\n[\"$DECORATION\",0]\n[\"\",0]\n];\n\nvar CLOTHDECORATION = [\n[\"sewn with $COLOUR silk\",50],\n[\"$EMBROIDED with $OATH the Emperor\",50],\n[\"$EMBROIDED with $OATH $DEITY always\", 25],\n[\"$EMBROIDED with $OATH $DEITY\", 25],\n[\"$EMBROIDED with runes\", 25],\n[\"stitched with $MINORMOD $COLOUR and $COLOUR $PATTERN\",20],\n[\"sewn with tiny $ANYMATERIAL beads\",10],\n[\"$EMBROIDED with the image of a $MAYBECOLOUR nude dancer\",0],\n[\"$EMBROIDED with small stars all over\",0],\n[\"$EMBROIDED with $SHAPE\",0],\n[\"$EMBROIDED with $SHAPE\",0],\n[\"$EMBROIDED with $SHAPE\",0],\n[\"$EMBROIDED with the arms of $PROVINCE\",0],\n[\"$EMBROIDED with the arms of $CITY\",0],\n[\"\",0],\n[\"\",0]\n];\n\nvar SIZED = [\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\", sized for an elf\",10],\n[\", sized for a dwarf\",10],\n[\", sized for a halfling\",10],\n[\", sized for a halfling\",10],\n[\", sized for a large human\",10],\n];\n\nvar OATH = [\n[\"a sacred oath of obedience to\", 0],\n[\"a sacred oath to\", 0],\n[\"a prayers to\", 0],\n[\"a sacred devotions to\", 0]\n];\n\nvar FOLLOWERS = [\n[\"worshippers\", 0],\n[\"followers\", 0],\n[\"the church\", 0],\n[\"the cult\", 0]\n];\n\nvar SHAPE = [\n[\"the symbol of the four seasons\",20],\n[\"the symbol of the eight winds of magic\",20],\n[\"a twin-tailed comet\",20],\n[\"an hourglass\", 20],\n[\"a gothic cross\", 20],\n[\"a crowned skull\", 20],\n[\"a skull\", 20],\n[\"a set of scales\", 20],\n[\"the twin-tailed comet symbol used by $FOLLOWERS of Sigmar\",20],\n[\"the twin-tailed comet symbol used by $FOLLOWERS of Sigmar\",20],\n[\"the hammer symbol used by $FOLLOWERS of Sigmar\",20],\n[\"the 'U' symbol used by $FOLLOWERS of Ulric\",20],\n[\"the wolf's head symbol used by $FOLLOWERS of Ulric\",20],\n[\"a five-pointed crown recogniced as the symbol of Manaan\",15],\n[\"'X' symbols recognised by $FOLLOWERS of Ranald\",10],\n[\"a heart\", 10],\n[\"a hammer\", 10],\n[\"a $ANIMAL\", 10],\n[\"a $ANIMAL\", 10],\n[\"a $ANIMAL's head\", 10],\n[\"a $ANIMAL's head\", 10],\n[\"the arms of $PROVINCE\",10],\n[\"the arms of $CITY\",10],\n[\"a hand\", 10],\n[\"a grimacing face\", 0],\n[\"coiled serpents\", 0],\n[\"a crescent moon\", 0],\n[\"a bone\", 0],\n[\"a wreath\",0],\n[\"a leaf\",0]\n];\n\nvar JEWELSTRING = [\n[\"hemp cord\", -25],\n[\"leather cord\", 0],\n[\"$COLOUR string\", 0],\n[\"$COLOUR silk cord\", 100],\n[\"silver chain\", 100],\n[\"gold chain\", 300],\n[\"fine $METALTRIMS chain\", 50]\n];\n\nvar PATTERN = [\n[\"diamond checks\", 0],\n[\"checks\", 0],\n[\"flames\", 0],\n[\"chevrons\", 0 ],\n[\"stripes\", 0 ]\n];\n\nvar LANGUAGE = [\n[\"Reiklander\",0],\n[\"Bretonnian\",0],\n[\"Kislevite\",0],\n[\"Wastelander\",0],\n[\"Arabian\",10],\n[\"Albionesse\",10],\n[\"Khazalid\",10],\n[\"Eltharin\",10],\n[\"Nehekharan hieroglyphics\",20],\n[\"Slann Pictograms\",20]\n];\n\nvar QUALITY = [\n[\"delicate\", 30],\n[\"big\", 50],\n[\"ornate\", 30],\n[\"\",0],\n[\"small\", -30]\n];\n\n\nvar MINORMOD = [\n[\"delicate\", 10],\n[\"ornate\", 10],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"simple\", -10],\n[\"plain\", -10],\n[\"crude\", -10]\n];\n\nvar SWORD = [\n[\"sword\", 0],\n[\"sword\", 0],\n[\"broadsword\", 0],\n[\"arming sword\", 0],\n[\"cutlass\", 0],\n[\"katzbalger (<i>sword</i>)\", 0],\n[\"falchion\", 0],\n[\"messer (<i>sword</i>)\", 0],\n[\"dussack (<i>sword</i>)\", 0],\n[\"cinquedea (<i>sword</i>)\", 0]\n];\n\nvar DAGGER = [\n[\"dagger\", 0],\n[\"dagger\", 0],\n[\"leaf-bladed dagger\", 0],\n[\"curved dagger\", 0],\n[\"stiletto\", 0],\n[\"rondel dagger\", 0],\n[\"bollock dagger\", 0],\n[\"poniard (<i>dagger</i>)\", 0],\n[\"anelace (<i>dagger</i>)\", 0]\n];\n\nvar HANDWEAPON = [\n[\"axe\", 0],\n[\"axe\", 0],\n[\"bearded axe\", 0],\n[\"battle axe\", 0],\n[\"battle axe\", 0],\n[\"mace\", 0],\n[\"mace\", 0],\n[\"warhammer (<i>hand weapon</i>)\", 0],\n[\"warhammer (<i>hand weapon</i>)\", 0],\n[\"military hammer (<i>hand weapon</i>)\", 0],\n[\"military pick (<i>hand weapon</i>)\", 0],\n[\"morning star (<i>hand weapon</i>)\", 0],\n[\"reinforced club (<i>hand weapon</i>)\", 0]\n];\n\nvar FENCING = [\n[\"foil\", 0],\n[\"rapier\", 0]\n];\n\nvar GOODQUALITY = [\n[\"<I>fine</I>\", 0],\n[\"<I>durable</I>\", 0],\n[\"<I>practical</I>\", 0],\n[\"<I>lightweight</I>\", 0]\n];\n\nvar BADQUALITY = [\n[\"<I>ugly</I>\", 0],\n[\"<I>shoddy</I>\", 0],\n[\"<I>unreliable</I>\", 0],\n[\"<I>bulky</I>\", 0]\n];\n\nvar GOODBLADEDECO = [\n[\"with a pattern-welded blade\",0],\n[\"made with good quality steel\",0],\n[\"$DECORATION\",0],\n[\"$DECORATION\",0]\n];\n\nvar BADBLADEDECO = [\n[\"saltwater-corroded\",0],\n[\"dented\",0],\n[\"pitted\",0],\n[\"rusted\",0],\n[\"bent\",0],\n[\"badly repaired\",0]\n];\n\nvar GOODWEAPONPREFIX = [\n[\"nicely crafted\",0],\n[\"well-made\",0],\n[\"superior\",0],\n[\"superior\",0],\n[\"excelent\",0],\n[\"elegant\",0],\n[\"$NEUTRALWEAPONPREFIX\",0],\n[\"\",0]\n];\n\nvar GOODWOODENPREFIX = [\n[\"reinforced\",0],\n[\"robust\",0],\n[\"iron-shod\",0],\n[\"$NEUTRALWEAPONPREFIX\",0],\n[\"\",0]\n];\n\nvar BADWOODENPREFIX = [\n[\"splintered\",0],\n[\"rotten\",0],\n[\"craked\",0],\n[\"warped\",0],\n[\"$NEUTRALWEAPONPREFIX\",0],\n[\"\",0]\n];\n\nvar NEUTRALWEAPONPREFIX = [\n[\"well-used\",0],\n[\"battle-proven\",0],\n[\"slighly scratched\",0],\n[\"old-fashioned\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0]\n];\n\nvar DANGLING = [\n[\"a $COLOUR ribbon\",0],\n[\"some $COLOUR ribbons\",0],\n[\"a string of oyster shells\",0],\n[\"a string of oyster shells\",0],\n[\"a string of snail shells\",0],\n[\"a string of small bells\",0],\n[\"a single small bell\",0],\n[\"some prayer ribbons to $DEITY\",0],\n[\"a pewter statuette of $DEITY\",0],\n[\"a few eagle feathers\",0],\n[\"an owl feather\",0],\n[\"a string of wolf's teeth\",0],\n[\"a few $COLOUR feathers\",0],\n[\"a tuff of horse hair\",0]\n];\n\nvar POMMELHILTSCABBARD = [\n[\"a $METALFITTING hilt and pommel\",0],\n[\"a $METALFITTING hilt and pommel\",0],\n[\"$DANGLING tied to the pommel\",0],\n[\"$DANGLING tied to the pommel\",0],\n[\"a $METALFITTING pommel in the shape of a two-headed $FIERCEANIMAL\",0],\n[\"a $METALFITTING pommel in the shape of a $SHAPE\",0],\n[\"a $METALFITTING round pommel with an icon of $DEITY\",0]\n[\"a $METALFITTING round pommel\",0],\n[\"a $METALFITTING disc pommel\",0],\n[\"a $METALFITTING fishtail pommel\",0],\n[\"a $METALFITTING scent stopper pommel\",0],\n[\"a $INLAYGEMS-studded pommel\",0],\n[\"a $METALFITTING hilt\",0],\n[\"a $METALFITTING sidering attached to the hilt\",0],\n[\"a $METALFITTING finger-ring attached to the hilt\",0],\n[\"a $METALFITTING nagel attached to the hilt\",0],\n[\"a $METALFITTING knuckle-bow\",0],\n[\"a $METALFITTING shell guard\",0],\n[\"a $METALFITTING S-shaped hilt\",0],\n[\"a $METALFITTING cruciform hilt\",0],\n[\"a $METALFITTING hilt $DECORATION\",0],\n[\"a $METALFITTING hilt $DECORATION\",0],\n[\"a $SCABBARDMAT scabbard $DECORATION\",0],\n[\"a $SCABBARDMAT scabbard $DECORATION\",0],\n[\"a $MINORMOD $SCABBARDMAT scabbard $DECORATION\",0],\n[\"a $SCABBARDMAT scabbard\",0],\n[\"a $SCABBARDMAT scabbard\",0],\n[\"a $MINORMOD $SCABBARDMAT scabbard\",0]\n];\n\nvar POMMELHANDLE = [\n[\"$DANGLING tied to the pommel\",0],\n[\"$DANGLING tied to the handle\",0],\n[\"a $METALFITTING pommel in the shape of a two-headed $FIERCEANIMAL\",0],\n[\"a $METALFITTING pommel in the shape of a $SHAPE\",0],\n[\"a $METALFITTING round pommel with an icon of $DEITY\",0]\n[\"a $METALFITTING round pommel\",0],\n[\"a $METALFITTING disc pommel\",0],\n[\"a $METALFITTING fishtail pommel\",0],\n[\"a $METALFITTING scent stopper pommel\",0],\n[\"a steel-reinforced $WOODMATERIAL handle\",0],\n[\"a $WOODMATERIAL handle $DECORATION\",0],\n[\"a $WOODMATERIAL handle $DECORATION\",0],\n[\"a $MAYBECOLOUR sling-strap\",0],\n[\"a $MAYBECOLOUR leather sling-strap\",0]\n];\n\nvar WITHPAULDRONSANDTASSETS = [\n[\"\", 0],\n[\"\", 0],\n[\"\", 0],\n[\"with pauldrons\", 0],\n[\"with pauldrons\", 0],\n[\"with spaulders\", 0],\n[\"with munnions\", 0],\n[\"with ailettes\", 0],\n[\"with solid tassets\", 0],\n[\"with articulated tassets\", 0],\n[\"with pauldrons and tassets\", 0],\n[\"with pauldrons and tassets\", 0],\n];\n\nvar CARDDECKS = [\n[\"82-card Reiklander Tarock\",0],\n[\"82-card Reiklander Tarock\",0],\n[\"82-card Reiklander Tarock, carefully marked\",0],\n[\"42-card Wissen Trionki\",0],\n[\"42-card Wissen Trionki, carefully marked\",0],\n[\"48-card Estalian deck\",0],\n[\"Old style Brettonian deck\",0],\n[\"Kyslev-style Trionki deck\",0],\n[\"102-card Dwarven runic deck\",10]\n];\nvar TRADETOOLS = [\n[\"a painter's kit with \"+(roll1d10()+1)+\" paintbrushes, a $METALFITTING flask with turpentine and pots of prepared oil paints, a few sponges and sheets of thick linen canvas. ??\",0],\n[\"an apothecary's trade tools with a set of spoons, weight and scales, \"+(roll1d10()+2)+\" glass phials, tins of rare earth and hard-to-find herbs, bottles of essential oils, pestle and mortar\",0],\n[\"an herbolist's trade tools with pestle and mortar, \"+(roll1d10()+1)+\" small knives, pruning shears, and a set of $MAYBECOLOUR gloves\",0],\n[\"a gunsmith's trade tool with a hammer, files, a musket-cleaning kit with muzzle rods, oils, chamois, fuses, flints and spare parts\",0],\n[\"a barber surgeon's trade tools including a sutures, saw, serrated knife, tooth pliers, a bottle of rotgut, spiked tongs and branding irons. There is also a jar with \"+(roll1d10()+1)+\" tooth already extracted\",0],\n[\"a physician's trade tools including needles and sutures, bandages, scalpel, vinegar, a serrated knife, forceps, and a speculum\",0],\n[\"a tailor's kit with pins and needles, swatches of fabric, scissors, measuring ribbon, \"+(roll2d10()+8)+\" assorted buttons and spools of coloured thread\",0],\n[\"a engineer's set of trade tools with papers, \"+(roll1d10()+1)+\" chalks and charcoal sticks, hourglass, measuring rod, fuse cord, drafting compass, and T-square\",0],\n[\"a navigator's kit composed of quadrant, astrolabe, charts and compasses, hourglass, and \"+(roll1d10()+4)+\" yards sounding line\",0],\n[\"a smith's trade tools with a big hammer, a smaller one, tongs, punches, swages, bits, and augers\",0],\n[\"a carpenter's trade tools with hammer and \"+(roll2d10()+16)+\" assorted nails, saw, auger and bits, measuring rod, chalk, and plumb lines.\",0]\n];\nvar BOOKDECORATION = [\n[\", within it are a few pressed flowers\",0],\n[\" with a few $COLOUR ribbons to bookmark it\",0],\n[\" with a few $COLOUR ribbons to bookmark it\",0],\n[\" with strange illuminations in the margins\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n[\"\",0],\n];\n\nvar ALLSTRINGS = [\n[\"$SWORD\",SWORD],\n[\"$DAGGER\",DAGGER],\n[\"$HANDWEAPON\",HANDWEAPON],\n[\"$FENCING\",FENCING],\n[\"$GOODBLADEDECO\",GOODBLADEDECO],\n[\"$BADBLADEDECO\",BADBLADEDECO],\n[\"$GOODWEAPONPREFIX\",GOODWEAPONPREFIX],\n[\"$GOODWOODENPREFIX\",GOODWOODENPREFIX],\n[\"$BADWOODENPREFIX\",BADWOODENPREFIX],\n[\"$NEUTRALWEAPONPREFIX\",NEUTRALWEAPONPREFIX],\n[\"$POMMELHILTSCABBARD\",POMMELHILTSCABBARD],\n[\"$POMMELHANDLE\",POMMELHANDLE],\n[\"$DANGLING\",DANGLING],\n[\"$SIZED\",SIZED],\n[\"$CLOTHDECORATION\",CLOTHDECORATION],\n[\"$DWARFDECORATION\",DWARFDECORATION],\n[\"$ELFDECORATION\",ELFDECORATION],\n[\"$DECORATION\",DECORATION],\n[\"$SHAPE\",SHAPE],\n[\"$FOLLOWERS\",FOLLOWERS],\n[\"$ANIMAL\",ANIMAL],\n[\"$FIERCEANIMAL\",FIERCEANIMAL],\n[\"$JEWELSTRING\",JEWELSTRING],\n[\"$ANYMATERIAL\",ANYMATERIAL],\n[\"$CHAINMETAL\", CHAINMETAL],\n[\"$METALMATERIAL\",METALMATERIAL],\n[\"$METALFITTING\",METALFITTING],\n[\"$METALTRIMS\",METALTRIMS],\n[\"$RAREMETAL\",RAREMETAL],\n[\"$SCABBARDMAT\",SCABBARDMAT],\n[\"$WOODMATERIAL\",WOODMATERIAL],\n[\"$STONEMATERIAL\",WOODMATERIAL],\n[\"$CRAFTFINE\", CRAFTFINE],\n[\"$INLAYGEMS\",INLAYGEMS],\n[\"$BODYPART\",BODYPART],\n[\"$DEITY\",DEITY],\n[\"$PAPERDAMAGED\",PAPERDAMAGED],\n[\"$STAINS\",STAINS],\n[\"$FUR\",FUR],\n[\"$TRIMMING\",TRIMMING],\n[\"$PATTERN\", PATTERN],\n[\"$OATH\",OATH],\n[\"$GOODORBADCLOTH\", GOODORBADCLOTH],\n[\"$GOODCLOTH\", GOODCLOTH],\n[\"$BADCLOTH\", BADCLOTH],\n[\"$MAYBESIZE\", MAYBESIZE],\n[\"$MAYBECOLOUR\", MAYBECOLOUR],\n[\"$COLOUR\", COLOUR],\n[\"$SHIELDCHARGES\", SHIELDCHARGES],\n[\"$SHIELDDECORATIONS\", SHIELDDECORATIONS ],\n[\"$SHIELDEXTRAS\", SHIELDEXTRAS ],\n[\"$SHIELDSENTENCE\", SHIELDSENTENCE ],\n[\"$SHIELDCOLOURS\", SHIELDCOLOURS],\n[\"$SAINTTITLE\", SAINTTITLE],\n[\"$SAINT\", SAINT],\n[\"$RELIC\", RELIC],\n[\"$BOOKDECORATION\", BOOKDECORATION],\n[\"$PLACE\",PLACE],\n[\"$PROVINCE\",PROVINCE],\n[\"$LANGUAGE\",LANGUAGE],\n[\"$CITY\",CITY],\n[\"$WRITING\",WRITING],\n[\"$EMBROIDED\",EMBROIDED],\n[\"$MINORMOD\",MINORMOD],\n[\"$QUALITY\",QUALITY],\n[\"$WITHPAULDRONSANDTASSETS\",WITHPAULDRONSANDTASSETS],\n[\"$CARDDECKS\",CARDDECKS],\n[\"$TRADETOOLS\",TRADETOOLS],\n[\"$GOODQUALITY\",GOODQUALITY],\n[\"$BADQUALITY\",BADQUALITY]\n];\n\n//Treasure, value in shillings\nvar TreasureJewels = [\n[\"Dwarven Beard Clasp\",\"A $MINORMOD $MAYBEFINE dwarf's $METALTRIMS beard-clasp.\", 5,0, 2],\n[\"Dwarven Beard Clasp\",\"A $MINORMOD $MAYBEFINE dwarf's $METALMATERIAL beard-clasp $DWARFDECORATION.\", 5,0, 2],\n\n[\"Elven Head Band\",\"A $MINORMOD $MAYBEFINE elven $METALTRIMS head band with a $INLAYGEMS set in the front.\", 10,0, 2],\n\n[\"Cloak Clasp\",\"A $MINORMOD $MAYBEFINE $METALTRIMS cloak clasp.\",4,0, 1],\n[\"Cloak Clasp\",\"A $METALTRIMS $MAYBEFINE cloak clasp in the shape of $SHAPE.\",5,0, 1],\n\n[\"Belt Buckle\",\"A $MINORMOD $METALTRIMS $MAYBEFINE belt buckle.\", 4,0, 1],\n[\"Belt Buckle\",\"A $QUALITY $METALTRIMS $MAYBEFINE belt buckle.\", 8,0, 1],\n[\"Belt Buckle\",\"A $METALMATERIAL $MAYBEFINE belt buckle shaped like a $FIERCEANIMAL's head.\", 6,0, 1],\n[\"Belt Buckle\",\"A $METALMATERIAL $MAYBEFINE belt buckle in the shape of $SHAPE.\", 5,0, 1],\n\n[\"Bracelet\",\"A $METALTRIMS $MAYBEFINE bracelet $DECORATION.\", 20,0, 1],\n[\"Bracelet\",\"A $METALTRIMS $MAYBEFINE bracelet inset with $INLAYGEMS.\", 6,0, 1],\n[\"Bracelet\",\"A $METALMATERIAL $MAYBEFINE bracelet with $METALTRIMS highlights.\", 5,0, 1],\n\n[\"Ring\",\"A $MINORMOD $METALMATERIAL ring.\", 3,0, 1],\n[\"Ring\",\"A $METALMATERIAL $MAYBEFINE ring $DECORATION.\", 4,0, 1],\n[\"Ring\",\"A $METALMATERIAL $MAYBEFINE ring with a $INLAYGEMS inset.\", 5,0, 1],\n[\"Signet Ring\",\"A $METALTRIMS $MAYBEFINE signet ring with an intrincated design.\", 50,0, 1],\n\n[\"Necklace\",\"A $MINORMOD $MAYBEFINE $METALTRIMS necklace.\", 20,0, 1],\n[\"Pendant\",\"A $METALMATERIAL $MAYBEFINE pendant in the shape of $SHAPE.\", 6, 1] ,\n[\"Pendant\",\"A $METALMATERIAL $MAYBEFINE pendant in the shape of $SHAPE, strung from a $JEWELSTRING necklace.\", 6,0, 1],\n[\"Pendant\",\"A $ANYMATERIAL $MAYBEFINE pendant on a $JEWELSTRING.\", 4,0, 1],\n\n[\"Neck Chain\",\"A $CHAINMETAL $CRAFTFINE heavy ceremonial neck chain.\", 20,0, 1],\n[\"Neck Chain\",\"A $CHAINMETAL $CRAFTFINE heavy ceremonial neck chain with plaque $DECORATION.\", 20,0, 1],\n\n[\"Earring\",\"A $MINORMOD $MAYBEFINE $METALMATERIAL earring.\", 3,0, 1],\n[\"Earring\",\"An $MAYBEFINE earring made of $METALMATERIAL and $DECORATION.\", 3,0, 1],\n[\"Pair of Earrings\",\"A $INLAYGEMS-studded $MAYBEFINE earring.\", 4,0, 1],\n[\"Pair of Earrings\",\"A $MINORMOD $MAYBEFINE pair of earrings made of $METALMATERIAL.\", 6,0, 1],\n[\"Earring\",\"An $MAYBEFINE earring made of $METALTRIMS with a $INLAYGEMS inset.\", 4,0, 1],\n\n[\"Holy Symbol\",\"A $MINORMOD $MAYBEFINE $ANYMATERIAL symbol of $DEITY.\", 6,0, 1],\n[\"Holy Statuette\",\"A $QUALITY $MAYBEFINE $ANYMATERIAL statuette of the god $DEITY.\", 6,0, 1, \"modules/wfrp4e-random-treasure/assets/icons/trappings/trappings_statuette.png\"],\n\n[\"Rare Coin\",\"A rare $METALMATERIAL coin $DECORATION.\", 2,0, 3],\n[\"Set of Buttons\",\"A set of $CRAFTFINE \"+ (roll=(roll1d10()+4)) +\" $METALMATERIAL buttons each mounted with a $INLAYGEMS.\", roll/2,0,1],\n\n[\"Metal Ingot\",\"An ingot of $METALMATERIAL.\", 10, 1, 2, \"modules/wfrp4e-random-treasure/assets/icons/trappings/trappings_ingot.png\"],\n[\"Stamped Metal Ingot\",\"An ingot of $METALMATERIAL stamped with a seal of $PLACE authorities.\", 10, 1, 2, \"modules/wfrp4e-random-treasure/assets/icons/trappings/trappings_ingot.png\"]\n\n];\n\nvar TreasureAll = [\nTreasureJewels];\n\n\nfunction parseCoinage( TotalSilver ) {\n var gold = 0;\n if (TotalSilver >= 20){\n  gold = Math.floor(TotalSilver/20);\n  TotalSilver = TotalSilver - gold * 20;\n };\n var silver = 0;\n if (TotalSilver >= 1) {\n  silver = Math.floor(TotalSilver)\n  TotalSilver = TotalSilver - silver;\n };\n brass = Math.floor(TotalSilver * 12);\n return [gold,silver,brass];\n}\n\nfunction roll1d10(){\n\"use strict\";\n return Math.floor(Math.random() * 10) + 1;\n}\nfunction roll2d10(){\n\"use strict\";\n return Math.floor(Math.random() * 10) + Math.floor(Math.random() * 10) + 2;\n}\nfunction rollXd10(x){\n\"use strict\";\n    var j;\n    var roll= 0;\n    for (j = 0; j < x; j += 1) {\n        roll += roll1d10();\n    }\n    return roll;\n}\nfunction roll1d100(){\n\"use strict\";\n return Math.floor(Math.random() * 100) + 1;\n};\n\nfunction removedoublespaces (str) {\n\"use strict\";\n str = str.replace(/ +(?= )/g,'');\n str = str.replace(/ \\./g,'.');\n return str;\n};\n\nfunction aanmanagement( str) {\n\"use strict\";\n var strnew = str.replace(/\\b(a)\\s([aeiou])/ig,'$1n $2');\n strnew = strnew.replace(/\\b(a)\\s<I>([aeiou])/ig,'$1n <I>$2');\n return strnew;\n};\n\n\nfunction randomTreasure(TreasureType){\n if (TreasureType == -1) {\n  TreasureType = Math.floor(Math.random() * TreasureAll.length) + 1;\n }; \n treasure = TreasureAll[TreasureType-1][ Math.floor(Math.random() * TreasureAll[TreasureType-1].length) ];\n return treasure;\n};\n\n\nfunction parsemaybefine (parsedstr, valuemultiplier) {\n var lookingfor = \"$MAYBEFINE\";\n if (parsedstr.includes(lookingfor) == true) {\n  if (valuemultiplier>200) { parsedstr = parsedstr.replace(lookingfor,\"<I>fine</I>\");} else \n  {parsedstr = parsedstr.replace(lookingfor,\"\");};\n };\n return parsedstr\n};\n\nfunction parseencumbrance (parsedstr, encumbrance) {\n var badlookingfor = \"<I>bulky</I>\";\n var goodlookingfor = \"<I>lightweight</I>\";\n if (parsedstr.includes(badlookingfor) == true) {\n  encumbrance = encumbrance + 1 };\n if (parsedstr.includes(goodlookingfor) == true) {\n  encumbrance = Math.max( 0 , encumbrance - 1) };\n return encumbrance\n};\n\nfunction parseAvailability (avalabilityval, parsedstr) {\n var val =  avalabilityval;\n for(var i=0; i < GOODQUALITY.length; i++){\n  if (parsedstr.includes(GOODQUALITY[i][0]) == true){\n   val = Math.min(4,val+1);\n  };\n };\n for(var i=0; i < BADQUALITY.length; i++){\n  if (parsedstr.includes(BADQUALITY[i][0]) == true){\n   val = Math.max(1,val-1);\n  };\n };\n return Availability[val-1];\n};\n\nfunction parsequalities(originalString) {\n var valuemultiplier = 100;\n var notdone = 1;\n while (notdone) {\n  notdone = 0;\n  for(var i=0; i < ALLSTRINGS.length; i++){\n    var lookingfor = ALLSTRINGS[i][0];\n    var strings =  ALLSTRINGS[i][1];\n    var randomnumber =  Math.floor(Math.random() * strings.length) ;\n    var replacement =  strings[ randomnumber ][0];\n    if (originalString.includes(lookingfor) == true) { \n     valuemultiplier = valuemultiplier + strings[ randomnumber ][1];\n     notdone = 1;\n    };\n    var originalString = originalString.replace( lookingfor , replacement);\n   };\n  };\n     var parsedString = aanmanagement(removedoublespaces(parsemaybefine(originalString,valuemultiplier)));\n    return [ parsedString, Math.max(valuemultiplier/100,0.1)];\n};\n\n\nfunction generateTreasure() {\n  var treasure = randomTreasure(-1);\n  var parsedtreasure = parsequalities(treasure[1]);\n  var parsedavailability = parseAvailability (treasure[4], parsedtreasure[0]);\n  var pcoin = parseCoinage(treasure[2] * parsedtreasure[1]);\n  var parsedencumbrance =  parseencumbrance(parsedtreasure[0],treasure[3]);\n  //default image. TODO: include image in treasure table.\n  var pimg = ( (treasure.length == 5) ? \"modules/wfrp4e-random-treasure/assets/icons/trappings/trappings_treasure.png\" : treasure[5]);\n  let item = Item.create({name: treasure[0], type:\"trapping\", img: pimg, data : { description: {value: parsedtreasure[0]}, availability: {value: parsedavailability }, encumberance:{value: parsedencumbrance}, price:{gc: pcoin[0], ss : pcoin[1], bp : pcoin[2] } }});\n  return item\n}\n\ngenerateTreasure ()","folder":null,"sort":0,"permission":{"default":0,"QUmQIf6DqYHqlZbK":3},"flags":{"core":{"sourceId":"Macro.9BaAN4ZanEx9qXCG"}},"_id":"pCLHUAk4Nevnw3gX"}
